<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link rel="stylesheet" href="%if;(cgi)%bvar.static_path;%end;css/fanchart.css">
</head>

%define;somebody_fanchart_info(xx)
"S%xx.anc_sosa.v;":{"fn":"%xx.first_name","sn":"%xx.surname","oc":"%xx.occ","dates":"%xx.birth_date.year;-%xx.death_date.year;"},
%end;
%define;somebody_fanchart_same(xx)
"S%xx.anc_sosa.v;":{"fn":"=","sn":"%xx.same","oc":"","dates":""},
%end;

<body>
<svg id="fanchart" viewBox="0 0 1400 950" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"></svg>
</body>

<script>
var link_to_person = "%prefix;";
var link_to_fanchart = "%prefix;m=A&t=FC&v=8&";

var ancestor = {
%foreach;ancestor_level(evar.v)
  %foreach;ancestor;
    %if;(ancestor.same = "")
      %apply;somebody_fanchart_info("ancestor")
    %else;
      %apply;somebody_fanchart_same("ancestor")
    %end;
  %end;
%end;
};
</script>
<script src="%if;(cgi)%bvar.static_path;%end;js/fanchart.js"></script>
</html>
