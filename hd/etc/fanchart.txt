<!DOCTYPE html>
<html lang="%lang;">
<head>
<meta charset="UTF-8">
<title>Arbre en éventail</title>
<link rel="stylesheet" href="%if;(cgi)%bvar.static_path;%end;css/fanchart.css">
</head>

%define;somebody_fanchart_info(xx)
"S%xx.anc_sosa.v;":{"fn":"%if(xx.public_name != "")%xx.public_name;%else;%xx.first_name;%end;","fnk":"%xx.first_name_key","sn":"%xx.surname","snk":"%xx.surname_key;","oc":"%xx.occ","dates":'%xx.dates;',"birth_place":"%xx.birth_place;","death_place":"%xx.death_place","death_age":"%xx.death_age","has_parents":%if(xx.has_parents)true%else;false%end;%nn;
  %if;xx.is_male;
    %foreach;ancestor.family;
      %if(family.index = ancestor.family.index)
        ,"marriage_date":"%marriage_date.year","marriage_place":"%marriage_place"
      %end;
    %end;
  %end;
},
%end;
%define;somebody_fanchart_same(xx)
"S%xx.anc_sosa.v;":{"fn":"=","sn":"%xx.same","fnk":"%xx.first_name_key","snk":"%xx.surname_key;","oc":"","dates":"","has_parents":%if(xx.has_parents)true%else;false%end;},
%end;

<body id="body">
<div id="places-list"><ul id="places_list"></ul></div>
<div id="death-age"><b>Âge au décès</b><ul>
<li id="DA0"><span class="DA0">■</span> 0-9</li>
<li id="DA10"><span class="DA10">■</span> 10-19</li>
<li id="DA20"><span class="DA20">■</span> 20-29</li>
<li id="DA30"><span class="DA30">■</span> 30-39</li>
<li id="DA40"><span class="DA40">■</span> 40-49</li>
<li id="DA50"><span class="DA50">■</span> 50-59</li>
<li id="DA60"><span class="DA60">■</span> 60-69</li>
<li id="DA70"><span class="DA70">■</span> 70-79</li>
<li id="DA80"><span class="DA80">■</span> 80-89</li>
<li id="DA90"><span class="DA90">■</span> 90-99</li>
<li id="DA100"><span class="DA100">■</span> 100-109</li>
<li id="DA110"><span class="DA110">■</span> 110-119</li>
<li id="DA120"><span class="DA120">■</span> 120-129</li>
</ul>
</div>
<div id="buttons" class="noprint">
<span id="b-refresh" class="button" title="Ajuster à la fenêtre">&#x21bb;</span>
<span id="b-zoom-in" class="button" title="Zoomer">&#x1f50e;</span>
<span id="b-zoom-out" class="button" title="Dézoomer">&#x1f50d;</span>
<span id="b-gen-add" class="button%if(evar.v >= 10) disabled%end;" title="Ajouter une génération">&#xff0b;</span>
<span id="b-gen-del" class="button%if(evar.v <= 1) disabled%end;" title="Supprimer une génération">&#xff0d;</span>
<span id="b-places-hl" class="button" title="Activer la mise en évidence des lieux">&#x1f310;</span>
<span id="b-places-colorise" class="button" title="Activer la colorisation globale des lieux">&#x1f3a8;</span>
<span id="b-death-age" class="button" title="Activer la colorisation de l'âge de décès">&#x271d;</span>
<span id="b-no-tool" class="button" title="Désactiver les outils">&#x274c;</span>
</div>
<svg id="fanchart" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" %if(evar.mono = "on")class="mono"%end;></svg>
</body>

<script>
var link_to_person = "%prefix;";
var link_to_fanchart = "%prefix;m=A&t=FC&%if(evar.mono != "")mono=%evar.mono;&%end;";
var max_gen = %evar.v;;
var tool = "%evar.tool;";
var mono = "%evar.mono;";

var ancestor = {
%foreach;ancestor_level(evar.v)
  %foreach;ancestor;
    %if;(ancestor.same = "")
      %apply;somebody_fanchart_info("ancestor")
    %else;
      %apply;somebody_fanchart_same("ancestor")
    %end;
  %end;
%end;
};
</script>
<script src="%if;(cgi)%bvar.static_path;%end;js/fanchart.js"></script>
</html>
